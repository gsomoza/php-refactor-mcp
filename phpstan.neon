parameters:
    level: 8
    paths:
        - src
        - tests
    excludePaths:
        - vendor
        - tests/Tools/Fixtures
    checkMissingIterableValueType: true
    checkGenericClassInNonGenericObjectType: true
    reportUnmatchedIgnoredErrors: false
    
    # Enable bleeding edge features
    phpVersion: 80100 # PHP 8.1
    
    # Additional checks
    checkTooWideReturnTypesInProtectedAndPublicMethods: true
    checkUninitializedProperties: true
    checkDynamicProperties: true
    
    # Ignore test-related issues
    ignoreErrors:
        # PHPUnit test properties initialized in setUp()
        - 
            message: '#Class .* has an uninitialized property \$tool\. Give it default value or assign it in the constructor\.#'
            path: tests/*
        - 
            message: '#Class .* has an uninitialized property \$tempDir\. Give it default value or assign it in the constructor\.#'
            path: tests/*
        # Array offset access after assertArrayHasKey is safe but PHPStan doesn't understand
        - 
            message: '#Offset .* does not exist on array.*#'
            path: tests/*
